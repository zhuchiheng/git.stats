(()=>{"use strict";var t={144:function(t,e,n){var a,o=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,a,o)}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(a=function(t){return a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},a(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=a(t),r=0;r<n.length;r++)"default"!==n[r]&&o(e,t,n[r]);return i(e,t),e}),s=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(o,i){function r(t){try{l(a.next(t))}catch(t){i(t)}}function s(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.findGitRepos=m,e.activate=function(t){const e=l.window.createStatusBarItem(l.StatusBarAlignment.Right,1e3);e.text="$(graph-line) Git Stats",e.tooltip="Click to view your Git contribution statistics",e.command="git-stats.showStats";const n=()=>{l.workspace.workspaceFolders?e.show():e.hide()};n(),t.subscriptions.push(l.workspace.onDidChangeWorkspaceFolders((()=>n()))),t.subscriptions.push(e);let a=l.commands.registerCommand("git-stats.showStats",(()=>s(this,void 0,void 0,(function*(){const e=l.workspace.workspaceFolders;if(e)try{const n=[];for(const t of e){const e=t.uri.fsPath,a=(0,d.simpleGit)(e);try{if(yield a.checkIsRepo())n.push({path:e,git:a});else{const t=yield m(e);n.push(...t)}}catch(t){}}if(0===n.length)return void l.window.showErrorMessage("No Git repositories found in workspace");const a=n.map((t=>new h.GitContributionAnalyzer(t.git))),o=new p.ContributionVisualization(t,a,n);l.window.withProgress({location:l.ProgressLocation.Notification,title:"Analyzing Git history...",cancellable:!1},(t=>s(this,void 0,void 0,(function*(){const t=(yield Promise.all(a.map(((t,e)=>t.getContributionStats(7,void 0,void 0,void 0,n[e].path))))).reduce(((t,e)=>{for(const n in e)if(t[n]){t[n].totalCommits+=e[n].totalCommits,t[n].totalInsertions+=e[n].totalInsertions,t[n].totalDeletions+=e[n].totalDeletions,t[n].totalFiles+=e[n].totalFiles;for(const a in e[n].dailyStats)t[n].dailyStats[a]?(t[n].dailyStats[a].commits+=e[n].dailyStats[a].commits,t[n].dailyStats[a].insertions+=e[n].dailyStats[a].insertions,t[n].dailyStats[a].deletions+=e[n].dailyStats[a].deletions,t[n].dailyStats[a].files+=e[n].dailyStats[a].files):t[n].dailyStats[a]=e[n].dailyStats[a];for(const a in e[n].hourlyStats)t[n].hourlyStats[a]?(t[n].hourlyStats[a].commits+=e[n].hourlyStats[a].commits,t[n].hourlyStats[a].insertions+=e[n].hourlyStats[a].insertions,t[n].hourlyStats[a].deletions+=e[n].hourlyStats[a].deletions,t[n].hourlyStats[a].files+=e[n].hourlyStats[a].files):t[n].hourlyStats[a]=e[n].hourlyStats[a]}else t[n]=e[n];return t}),{});yield o.show(t)}))))}catch(t){l.window.showErrorMessage("Error analyzing Git history: "+t)}else l.window.showErrorMessage("Please open a workspace with a Git repository")}))));t.subscriptions.push(a)};const l=r(n(398)),d=n(807),c=r(n(383)),u=r(n(3)),h=n(879),p=n(985);function m(t){return s(this,void 0,void 0,(function*(){const e=[];return yield function t(n){return s(this,void 0,void 0,(function*(){const a=yield c.promises.readdir(n,{withFileTypes:!0});for(const o of a){const a=u.join(n,o.name);if(o.isDirectory())if(".git"===o.name){const t=u.dirname(a);e.push({path:t,git:(0,d.simpleGit)(t)})}else yield t(a)}}))}(t),e}))}},879:function(t,e,n){var a,o=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,a,o)}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(a=function(t){return a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},a(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=a(t),r=0;r<n.length;r++)"default"!==n[r]&&o(e,t,n[r]);return i(e,t),e}),s=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(o,i){function r(t){try{l(a.next(t))}catch(t){i(t)}}function s(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((a=a.apply(t,e||[])).next())}))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GitContributionAnalyzer=void 0;const d=l(n(807)),c=l(n(716)),u=r(n(383)),h=r(n(3));class p{constructor(t,e={}){this.git=t,this.config={excludePatterns:["**/*.pb.go","**/*.pb.js","**/*.pb.ts","**/*_pb2.py","**/*_pb3.py","**/generated/**","**/*.pb.cs",...e.excludePatterns||[]]}}isProtobufGeneratedFile(t){if(t.includes("Protos/")||t.includes("Protos\\")){if(t.toLowerCase().endsWith(".cs"))try{u.readFileSync(t,"utf8").split("\n").slice(0,5).join("\n");return!0}catch(t){return!0}return!0}if(!u.existsSync(t))return!1;if(t.toLowerCase().endsWith(".cs"))try{const e=u.readFileSync(t,"utf8").split("\n").slice(0,20).join("\n"),n=["Generated by the protocol buffer compiler","<auto-generated>","DO NOT EDIT","using pb = global::Google.Protobuf","using pbc = global::Google.Protobuf.Collections","namespace Google.Protobuf","#pragma warning disable"].some((t=>e.includes(t)));return n}catch(t){return!1}return this.config.excludePatterns.some((e=>{const n=e.replace(/\./g,"\\.").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*"),a=new RegExp(n).test(t);return a}))}shouldIncludeFile(t,e){if(t.includes("Protos/")||t.includes("Protos\\"))return!1;const n=h.join(e,t),a=this.isProtobufGeneratedFile(n);return!a}getLastCommitTime(){return s(this,void 0,void 0,(function*(){try{const t=yield this.git.log(["-1","--pretty=format:%aI"]);if(t&&t.latest&&t.latest.hash){const e=t.latest.hash.trim(),n=(0,c.default)(e);if(n.isValid())return n}}catch(t){}return(0,c.default)()}))}getContributionStatsForDeveloper(t,e,n,a){return s(this,void 0,void 0,(function*(){return yield this.getContributionStats(e,n,a,t)}))}findGitRepos(t){return s(this,void 0,void 0,(function*(){const e=[],n=[t],a=new Set;for(;n.length>0;){const t=n.pop();if(!a.has(t)){a.add(t);try{const a=u.readdirSync(t);if(a.includes(".git")){e.push(t);continue}for(const e of a){const a=h.join(t,e);try{u.statSync(a).isDirectory()&&n.push(a)}catch(t){}}}catch(t){}}}return e}))}analyzeMultipleRepositories(t){return s(this,arguments,void 0,(function*(t,e=7,n,a){const o={};let i,r;n&&a?(r=(0,c.default)(n).startOf("day"),i=(0,c.default)(a).endOf("day")):(i=(0,c.default)().endOf("day"),r=i.clone().subtract(e-1,"days").startOf("day"));for(const s of t)try{const t=(0,d.default)(s),l=new p(t),c=yield l.getContributionStats(e,n,a,void 0,s);for(const t in c){o[t]||(o[t]={author:c[t].author,email:c[t].email,startDate:r,endDate:i,totalCommits:0,totalInsertions:0,totalDeletions:0,totalFiles:0,dailyStats:{},hourlyStats:{}}),o[t].totalCommits+=c[t].totalCommits,o[t].totalInsertions+=c[t].totalInsertions,o[t].totalDeletions+=c[t].totalDeletions,o[t].totalFiles+=c[t].totalFiles;for(const e in c[t].dailyStats)o[t].dailyStats[e]||(o[t].dailyStats[e]={commits:0,insertions:0,deletions:0,files:0}),o[t].dailyStats[e].commits+=c[t].dailyStats[e].commits,o[t].dailyStats[e].insertions+=c[t].dailyStats[e].insertions,o[t].dailyStats[e].deletions+=c[t].dailyStats[e].deletions,o[t].dailyStats[e].files+=c[t].dailyStats[e].files;for(const e in c[t].hourlyStats)o[t].hourlyStats[e]||(o[t].hourlyStats[e]={commits:0,insertions:0,deletions:0,files:0}),o[t].hourlyStats[e].commits+=c[t].hourlyStats[e].commits,o[t].hourlyStats[e].insertions+=c[t].hourlyStats[e].insertions,o[t].hourlyStats[e].deletions+=c[t].hourlyStats[e].deletions,o[t].hourlyStats[e].files+=c[t].hourlyStats[e].files}}catch(t){}return o}))}getContributionStats(){return s(this,arguments,void 0,(function*(t=7,e,n,a,o){let i,r;e&&n?(r=(0,c.default)(e).startOf("day"),i=(0,c.default)(n).endOf("day")):(i=yield this.getLastCommitTime(),i.isValid()||(i=(0,c.default)()),r=i.clone().subtract(t-1,"days").startOf("day"),i=i.clone().endOf("day"));try{const t=["--all","--no-merges","--numstat","--date=iso-strict","--pretty=format:commit %H%n%an%n%aI%n%s%n","--since",r.format("YYYY-MM-DD HH:mm:ss"),"--until",i.format("YYYY-MM-DD HH:mm:ss"),"--invert-grep","--grep=^WIP","--grep=^stash","--grep=^\\[STASH\\]","--grep=^\\[stash\\]"];a&&"all"!==a&&t.push("--author="+a);const e=yield this.git.log(t);if(!e||!e.all||0===e.all.length)return{};const n={},s=e.all[0].hash.split("\ncommit ");for(const t of s){if(!t.trim())continue;const e=t.split("\n");if(e.length<4)continue;e[0].trim();const a=e[1].trim(),s=e[2].trim(),l=e[3].trim();if(a.toLowerCase().includes("stash")||l.toLowerCase().includes("stash")||l.startsWith("WIP")||l.startsWith("[STASH]")||l.startsWith("[stash]"))continue;const d=(0,c.default)(s);if(!d.isValid())continue;n[a]||(n[a]={author:a,email:"",startDate:r,endDate:i,totalCommits:0,totalInsertions:0,totalDeletions:0,totalFiles:0,dailyStats:{},hourlyStats:{}});const u=d.format("YYYY-MM-DD");n[a].dailyStats[u]||(n[a].dailyStats[u]={commits:0,insertions:0,deletions:0,files:0});const h=d.format("HH");n[a].hourlyStats[h]||(n[a].hourlyStats[h]={commits:0,insertions:0,deletions:0,files:0}),n[a].totalCommits++,n[a].dailyStats[u].commits++,n[a].hourlyStats[h].commits++;for(let t=4;t<e.length;t++){const i=e[t].trim();if(!i)continue;const[r,s,l]=i.split("\t");if(!l)continue;if(!this.shouldIncludeFile(l,o||""))continue;const d="-"===r?0:parseInt(r)||0,c="-"===s?0:parseInt(s)||0;n[a].totalInsertions+=d,n[a].totalDeletions+=c,n[a].totalFiles++,n[a].dailyStats[u].insertions+=d,n[a].dailyStats[u].deletions+=c,n[a].dailyStats[u].files++,n[a].hourlyStats[h].insertions+=d,n[a].hourlyStats[h].deletions+=c,n[a].hourlyStats[h].files++}}for(const t in n)n[t].startDate=r,n[t].endDate=i;for(const t in n){const e=r.clone();for(;e.isSameOrBefore(i,"day");){const a=e.format("YYYY-MM-DD");n[t].dailyStats[a]||(n[t].dailyStats[a]={commits:0,insertions:0,deletions:0,files:0}),e.add(1,"day")}}for(const t in n)for(let e=0;e<24;e++){const a=e.toString().padStart(2,"0");n[t].hourlyStats[a]||(n[t].hourlyStats[a]={commits:0,insertions:0,deletions:0,files:0})}return n}catch(t){throw t}}))}analyzeRepository(t,e,n){return s(this,void 0,void 0,(function*(){const a=(0,d.default)(t),o={};try{const i=(yield a.raw(["log","--all","--no-merges","--numstat","--format=commit:%H%nauthor:%aN%nemail:%aE%ndate:%aI","--since",e.format("YYYY-MM-DD HH:mm:ss"),"--until",n.format("YYYY-MM-DD HH:mm:ss")])).split("\ncommit:").filter((t=>t.trim()));for(const a of i){const i=a.trim().split("\n");let r="",s="",l="",d="",u=0,h=0,p=0;for(const e of i)if(e.startsWith("commit:"))d=e.substring(7).trim();else if(e.startsWith("author:"))r=e.substring(7).trim();else if(e.startsWith("email:"))s=e.substring(6).trim();else if(e.startsWith("date:"))l=e.substring(5).trim();else if(e.trim()&&!e.startsWith("commit:")){const n=e.split("\t");if(3===n.length){const[e,a,o]=n;if(!this.shouldIncludeFile(o,t))continue;const i="-"===e?0:parseInt(e)||0,r="-"===a?0:parseInt(a)||0;u+=i,h+=r,p++}}const m=(0,c.default)(l);if(!m.isValid())continue;o[r]||(o[r]={author:r,email:s,startDate:e,endDate:n,totalCommits:0,totalInsertions:0,totalDeletions:0,totalFiles:0,dailyStats:{},hourlyStats:{}});const g=m.format("YYYY-MM-DD"),f=m.format("HH");o[r].dailyStats[g]||(o[r].dailyStats[g]={commits:0,insertions:0,deletions:0,files:0}),o[r].hourlyStats[f]||(o[r].hourlyStats[f]={commits:0,insertions:0,deletions:0,files:0}),o[r].totalCommits++,o[r].totalInsertions+=u,o[r].totalDeletions+=h,o[r].totalFiles+=p,o[r].dailyStats[g].commits++,o[r].dailyStats[g].insertions+=u,o[r].dailyStats[g].deletions+=h,o[r].dailyStats[g].files+=p,o[r].hourlyStats[f].commits++,o[r].hourlyStats[f].insertions+=u,o[r].hourlyStats[f].deletions+=h,o[r].hourlyStats[f].files+=p}for(const t in o){const a=e.clone().startOf("day");for(;a.isSameOrBefore(n,"day");){const e=a.format("YYYY-MM-DD");o[t].dailyStats[e]||(o[t].dailyStats[e]={commits:0,insertions:0,deletions:0,files:0}),a.add(1,"day")}for(let e=0;e<24;e++){const n=e.toString().padStart(2,"0");o[t].hourlyStats[n]||(o[t].hourlyStats[n]={commits:0,insertions:0,deletions:0,files:0})}}return o}catch(t){throw t}}))}}e.GitContributionAnalyzer=p},985:function(t,e,n){var a,o=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,a,o)}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(a=function(t){return a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},a(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=a(t),r=0;r<n.length;r++)"default"!==n[r]&&o(e,t,n[r]);return i(e,t),e}),s=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(o,i){function r(t){try{l(a.next(t))}catch(t){i(t)}}function s(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((a=a.apply(t,e||[])).next())}))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ContributionVisualization=void 0;const d=r(n(398)),c=r(n(3)),u=l(n(716));e.ContributionVisualization=class{constructor(t,e,n){this.context=t,this.analyzers=e,this.disposables=[],this.gitRepos=[],this.currentRepoIndex=0,this.globalCache={},this.gitRepos=n,this.analyzer=e[0]}dispose(){var t;null===(t=this.panel)||void 0===t||t.dispose(),this.disposables.forEach((t=>t.dispose()))}update(t){return s(this,void 0,void 0,(function*(){this.panel&&(yield this.updateVisualization(t))}))}updateStats(t){return s(this,void 0,void 0,(function*(){var e;if(!this.panel)return;const n=Object.values(t),a=this.getAllDates(t),o=this.getHoursArray(),i=this.prepareCommitData(n,a),r=this.prepareChangeData(n,a),s=this.prepareHourlyCommitData(n,o),l=this.prepareHourlyChangeData(n,o);(null===(e=this.panel)||void 0===e?void 0:e.webview)&&this.panel.webview.postMessage({command:"updateData",commitData:i,changeData:r,hourlyCommitData:s,hourlyChangeData:l})}))}updateVisualization(t){return s(this,void 0,void 0,(function*(){if(!this.panel)return;const e=Object.values(t),n=this.getAllDates(t),a=this.getHoursArray(),o=this.prepareCommitData(e,n),i=this.prepareChangeData(e,n),r=this.prepareHourlyCommitData(e,a),s=this.prepareHourlyChangeData(e,a),l=this.prepareCalendarData(e,n),d=e.map((t=>({author:t.author,totalCommits:t.totalCommits||0,totalInsertions:t.totalInsertions||0,totalDeletions:t.totalDeletions||0,totalFiles:t.totalFiles||0})));this.panel&&(yield this.panel.webview.postMessage({command:"updateData",commitData:o,changeData:i,hourlyCommitData:r,hourlyChangeData:s,authorStats:d,calendarData:l}))}))}handleTimeRangeChange(t,e,n){return s(this,void 0,void 0,(function*(){var a;try{if(this.analyzer=this.analyzers[this.currentRepoIndex],this.globalCache=yield this.analyzer.getContributionStats(t,e,n),null===(a=this.panel)||void 0===a?void 0:a.webview){const t=Object.keys(this.globalCache).filter((t=>!t.toLowerCase().includes("stash")));this.panel.webview.postMessage({command:"updateDevelopers",developers:t})}yield this.applyDeveloperFilter()}catch(t){}}))}applyDeveloperFilter(t){return s(this,void 0,void 0,(function*(){try{const e=t&&"all"!==t?{[t]:this.globalCache[t]}:this.globalCache;yield this.update(e)}catch(t){}}))}show(t){return s(this,void 0,void 0,(function*(){if(this.globalCache=t,this.panel){this.webview=this.panel.webview,this.panel.reveal();const e=Object.keys(t);this.panel.webview.postMessage({command:"updateDevelopers",developers:e})}else this.panel=d.window.createWebviewPanel("codeActivityStats","Git Stats",d.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[this.context.extensionUri]}),this.webview=this.panel.webview,this.panel.onDidDispose((()=>{this.panel=void 0}),null,this.disposables),this.panel.webview.onDidReceiveMessage((t=>s(this,void 0,void 0,(function*(){switch(t.command){case"timeRangeChanged":yield this.handleTimeRangeChange(t.days,t.startDate,t.endDate);break;case"developerChanged":yield this.handleDeveloperChange(t.developer);break;case"repoChanged":this.currentRepoIndex=t.repoIndex,yield this.handleTimeRangeChange(7)}}))),void 0,this.disposables);const e=this.getAllDates(t),n=this.prepareCommitData(Object.values(t),e),a=this.prepareChangeData(Object.values(t),e),o=this.prepareHourlyCommitData(Object.values(t),this.getHoursArray()),i=this.prepareHourlyChangeData(Object.values(t),this.getHoursArray());this.panel&&(this.panel.webview.html=this.getWebviewContent(t,n,a,o,i))}))}handleDeveloperChange(t){return s(this,void 0,void 0,(function*(){try{yield this.applyDeveloperFilter(t)}catch(t){}}))}getWebviewContent(t,e,n,a,o){const i=Object.values(t),r=this.getAllDates(t),s=i[0],l=(null==s?void 0:s.startDate.format("YYYY-MM-DD"))||(0,u.default)().subtract(6,"days").format("YYYY-MM-DD"),h=(null==s?void 0:s.endDate.format("YYYY-MM-DD"))||(0,u.default)().format("YYYY-MM-DD"),p=this.prepareCalendarData(i,r);return`<!DOCTYPE html>\n        <html>\n        <head>\n            <title>Git Stats</title>\n            <script src="${this.webview.asWebviewUri(d.Uri.joinPath(this.context.extensionUri,"node_modules","chart.js","dist","chart.umd.js"))}"><\/script>\n            <style>\n                :root {\n                    --vscode-dropdown-background: var(--vscode-input-background);\n                    --vscode-dropdown-foreground: var(--vscode-input-foreground);\n                    --vscode-dropdown-border: var(--vscode-input-border);\n                }\n                .container {\n                    padding: 20px;\n                    max-width: 1600px;\n                    margin: 0 auto;\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n                }\n                .header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 20px;\n                }\n                .time-range-selector {\n                    display: flex;\n                    align-items: center;\n                    gap: 10px;\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                }\n                .date-picker {\n                    background-color: var(--vscode-dropdown-background);\n                    color: var(--vscode-dropdown-foreground);\n                    border: 1px solid var(--vscode-dropdown-border);\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    font-size: 13px;\n                }\n                .date-separator {\n                    color: var(--vscode-foreground);\n                    margin: 0 4px;\n                }\n                .chart-container {\n                    position: relative;\n                    height: 400px;\n                    margin-bottom: 20px;\n                    background-color: var(--vscode-editor-background);\n                    padding: 15px;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                }\n                .calendar-container {\n                    position: relative;\n                    height: 900px;\n                    margin-bottom: 20px;\n                    background-color: var(--vscode-editor-background);\n                    padding: 15px;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                }\n                .chart-title {\n                    margin-bottom: 15px;\n                    color: var(--vscode-foreground);\n                    font-size: 18px;\n                    font-weight: 500;\n                }\n                .summary-table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    margin-top: 20px;\n                    margin-bottom: 30px;\n                    background-color: var(--vscode-editor-background);\n                    border-radius: 8px;\n                    overflow: hidden;\n                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                }\n                .summary-table th, .summary-table td {\n                    padding: 12px;\n                    text-align: left;\n                    border: 1px solid var(--vscode-dropdown-border);\n                }\n                .summary-table th {\n                    background-color: var(--vscode-dropdown-background);\n                    font-weight: 500;\n                }\n                .summary-table tr:hover {\n                    background-color: var(--vscode-list-hoverBackground);\n                }\n                .pie-chart-container {\n                    position: absolute;\n                    top: 100px;\n                    left: 100px;\n                    width: 150px;\n                    height: 150px;\n                    background-color: rgba(255, 255, 255, 0.05);\n                    border-radius: 8px;\n                    cursor: move;\n                    z-index: 1000;\n                    backdrop-filter: blur(3px);\n                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);\n                }\n                .pie-chart-container:hover {\n                    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n                }\n                select {\n                    background-color: var(--vscode-dropdown-background);\n                    color: var(--vscode-dropdown-foreground);\n                    border: 1px solid var(--vscode-dropdown-border);\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    font-size: 13px;\n                }\n                select:focus {\n                    outline: none;\n                    border-color: var(--vscode-focusBorder);\n                }\n                h1 {\n                    margin: 0;\n                    font-size: 24px;\n                    color: var(--vscode-foreground);\n                }\n            </style>\n        </head>\n        <body>\n            <div class="container">\n                <div class="header">\n                    <h1>Git Stats</h1>\n                    <div class="time-range-selector">\n                        <input type="date" id="startDate" class="date-picker" title="Start Date">\n                        <span class="date-separator">to</span>\n                        <input type="date" id="endDate" class="date-picker" title="End Date">\n                        <select id="timeRange">\n                            <option value="custom" selected>Custom Range</option>\n                            <option value="7">Last Week</option>\n                            <option value="30">Last Month</option>\n                            <option value="90">Last 3 Months</option>\n                            <option value="180">Last 6 Months</option>\n                            <option value="365">Last Year</option>\n                        </select>\n                    </div>\n                    <div class="repo-selector">\n                        <select id="repoSelect">\n                            ${this.gitRepos.map(((t,e)=>`<option value="${e}">${c.basename(t.path)}</option>`)).join("")}\n                        </select>\n                    </div>\n                    <div class="developer-selector"> \x3c!-- 新增开发者选择器 --\x3e\n                        <select id="developerSelect">\n                            <option value="all">All developers</option>\n                            ${i.map((t=>'<option value="'+t.author+'">'+t.author+"</option>")).join("")}\n                        </select>\n                    </div>\n                </div>\n                \x3c!-- Daily Charts --\x3e\n                <div class="chart-container">\n                    <div class="pie-chart-container">\n                        <canvas id="pieChart"></canvas>\n                    </div>\n                    <h2 class="chart-title">Daily Commits</h2>\n                    <canvas id="commitChart"></canvas>\n                </div>\n                <div class="chart-container">\n                    <div class="pie-chart-container">\n                        <canvas id="linesChangedPieChart"></canvas>\n                    </div>\n                    <h2 class="chart-title">Daily Lines Changed</h2>\n                    <canvas id="changeChart"></canvas>\n                </div>\n\n                \x3c!-- Hourly Charts --\x3e\n                <div class="chart-container">\n                    <h2 class="chart-title">Hourly Commits</h2>\n                    <canvas id="hourlyCommitChart"></canvas>\n                </div>\n                <div class="chart-container">\n                    <h2 class="chart-title">Hourly Lines Changes</h2>\n                    <canvas id="hourlyChangeChart"></canvas>\n                </div>\n\n                \x3c!-- 日历图表 --\x3e\n                <div class="calendar-container">\n                    <h2 class="chart-title">Contribution Calendar</h2>\n                    <div id="calendar" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 4px; max-height: 800px; overflow-y: auto; padding: 4px;"></div>\n                </div>\n\n                <h2>Summary</h2>\n                <table class="summary-table">\n                    <tr>\n                        <th>Author</th>\n                        <th>Total Commits</th>\n                        <th>Lines Added</th>\n                        <th>Lines Deleted</th>\n                        <th>Files Changed</th>\n                    </tr>\n                    `+i.map((t=>"\n                        <tr>\n                            <td>"+t.author+"</td>\n                            <td>"+t.totalCommits+"</td>\n                            <td>"+t.totalInsertions+"</td>\n                            <td>"+t.totalDeletions+"</td>\n                            <td>"+t.totalFiles+"</td>\n                        </tr>\n                    ")).join("")+`\n                </table>\n            </div>\n            <script>\n                // 拖动功能\n                const pieChartContainers = document.querySelectorAll('.pie-chart-container');\n                let isDragging = false;\n                let currentX;\n                let currentY;\n                let initialX;\n                let initialY;\n                let activePieChart = null;\n\n                pieChartContainers.forEach(container => {\n                    container.addEventListener('mousedown', (e) => {\n                        activePieChart = container;\n                        dragStart(e);\n                    });\n                });\n                \n                document.addEventListener('mousemove', drag);\n                document.addEventListener('mouseup', dragEnd);\n\n                function dragStart(e) {\n                    if (!activePieChart) return;\n                    initialX = e.clientX - activePieChart.offsetLeft;\n                    initialY = e.clientY - activePieChart.offsetTop;\n                    isDragging = true;\n                }\n\n                function drag(e) {\n                    if (isDragging && activePieChart) {\n                        e.preventDefault();\n                        currentX = e.clientX - initialX;\n                        currentY = e.clientY - initialY;\n                        \n                        // 限制在图表区域内\n                        const container = activePieChart.closest('.chart-container');\n                        const maxX = container.offsetWidth - activePieChart.offsetWidth;\n                        const maxY = container.offsetHeight - activePieChart.offsetHeight;\n                        \n                        currentX = Math.max(0, Math.min(currentX, maxX));\n                        currentY = Math.max(0, Math.min(currentY, maxY));\n\n                        activePieChart.style.left = currentX + 'px';\n                        activePieChart.style.top = currentY + 'px';\n                    }\n                }\n\n                function dragEnd() {\n                    isDragging = false;\n                    activePieChart = null;\n                }\n\n\n                // 添加仓库选择变化处理\n                const repoSelect = document.getElementById('repoSelect');\n                repoSelect.addEventListener('change', function(e) {\n                    vscode.postMessage({\n                        command: 'repoChanged',\n                        repoIndex: parseInt(this.value)\n                    });\n                });\n\n                const vscode = acquireVsCodeApi();\n                let commitChart, changeChart, pieChart, linesChangedPieChart;\n\n                // 解析数据\n                const commitData = ${JSON.stringify(e)};\n                const changeData = ${JSON.stringify(n)};\n                const hourlyCommitData = ${JSON.stringify(a)};\n                const hourlyChangeData = ${JSON.stringify(o)};\n\n                // 设置初始日期范围\n                const today = new Date();\n                today.setHours(0, 0, 0, 0);  // 设置时间为当天的0点\n                const lastCommitDate = new Date(endDate);\n                lastCommitDate.setHours(0, 0, 0, 0);  // 设置时间为当天的0点\n\n                // 设置日期选择器默认值\n                document.getElementById('startDate').value = '${l}';\n                document.getElementById('endDate').value = '${h}';\n                \n                // 计算日期范围天数\n                const start = new Date('${l}');\n                const end = new Date('${h}');\n                const diffDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\n                \n                // 设置时间范围选择器\n                if (diffDays === 7) {\n                    document.getElementById('timeRange').value = '7';  // Last Week\n                } else if (diffDays === 30) {\n                    document.getElementById('timeRange').value = '30'; // Last Month\n                } else {\n                    document.getElementById('timeRange').value = 'custom';  // Custom Range\n                }\n\n                // 创建提交图表\n                function createCommitChart(data) {\n                    const ctx = document.getElementById('commitChart');\n                    if (commitChart) {\n                        commitChart.destroy();\n                    }\n                    commitChart = new Chart(ctx, {\n                        type: 'line',\n                        data: data,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            interaction: {\n                                intersect: false,\n                                mode: 'index'\n                            },\n                            plugins: {\n                                legend: {\n                                    position: 'top',\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            return context.dataset.label + ': ' + context.raw + ' commits';\n                                        }\n                                    }\n                                }\n                            },\n                            elements: {\n                                line: {\n                                    tension: 0.4,\n                                    cubicInterpolationMode: 'monotone'\n                                }\n                            },\n                            scales: {\n                                x: {\n                                    title: {\n                                        display: true,\n                                        text: 'Date'\n                                    },\n                                    ticks: {\n                                        maxRotation: 45,\n                                        minRotation: 45\n                                    }\n                                },\n                                y: {\n                                    beginAtZero: true,\n                                    title: {\n                                        display: true,\n                                        text: 'Number of Commits'\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                // 创建变更图表\n                function createChangeChart(data) {\n                    const ctx = document.getElementById('changeChart');\n                    if (changeChart) {\n                        changeChart.destroy();\n                    }\n                    changeChart = new Chart(ctx, {\n                        type: 'bar',\n                        data: data,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            interaction: {\n                                intersect: false,\n                                mode: 'index'\n                            },\n                            plugins: {\n                                legend: {\n                                    position: 'top',\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            return context.dataset.label + ': ' + context.raw + ' lines changed';\n                                        }\n                                    }\n                                }\n                            },\n                            scales: {\n                                x: {\n                                    title: {\n                                        display: true,\n                                        text: 'Date'\n                                    },\n                                    ticks: {\n                                        maxRotation: 45,\n                                        minRotation: 45\n                                    }\n                                },\n                                y: {\n                                    beginAtZero: true,\n                                    title: {\n                                        display: true,\n                                        text: 'Lines Changed'\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                // 创建饼图\n                function createPieChart(data) {\n                    const ctx = document.getElementById('pieChart');\n                    const totalCommits = data.datasets.reduce((acc, dataset) => {\n                        return acc + dataset.data.reduce((sum, val) => sum + val, 0);\n                    }, 0);\n                    \n                    const pieData = {\n            labels: data.datasets.map(d => d.label),\n            datasets: [{\n                data: data.datasets.map(d => \n                    d.data.reduce((sum, val) => sum + val, 0)\n                ),\n                backgroundColor: data.datasets.map(d => d.backgroundColor),\n                borderColor: 'rgba(0, 0, 0, 0.1)',\n                borderWidth: 1\n            }]\n        };\n\n                    if (pieChart) {\n                        pieChart.destroy();\n                    }\n\n                    pieChart = new Chart(ctx, {\n                        type: 'pie',\n                        data: pieData,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            plugins: {\n                                legend: {\n                                    display: false\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            const value = context.raw;\n                                            const percentage = ((value / totalCommits) * 100).toFixed(1);\n                                            return [\n                                                context.label,\n                                                'Commits: ' + value,\n                                                'Percentage: ' + percentage + '%'\n                                            ];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                // 创建Lines Changed饼图\n                function createLinesChangedPieChart(data) {\n                    const ctx = document.getElementById('linesChangedPieChart');\n                    const totalLines = data.datasets.reduce((acc, dataset) => {\n                        return acc + dataset.data.reduce((sum, val) => sum + val, 0);\n                    }, 0);\n                    \n                    const pieData = {\n                        labels: data.datasets.map(d => d.label),\n                        datasets: [{\n                            data: data.datasets.map(d => \n                                d.data.reduce((sum, val) => sum + val, 0)\n                            ),\n                            backgroundColor: data.datasets.map(d => d.backgroundColor),\n                            borderColor: 'rgba(0, 0, 0, 0.1)',\n                            borderWidth: 1\n                        }]\n                    };\n\n                    if (linesChangedPieChart) {\n                        linesChangedPieChart.destroy();\n                    }\n\n                    linesChangedPieChart = new Chart(ctx, {\n                        type: 'pie',\n                        data: pieData,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            plugins: {\n                                legend: {\n                                    display: false\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            const value = context.raw;\n                                            const percentage = ((value / totalLines) * 100).toFixed(1);\n                                            return [\n                                                context.label,\n                                                'Lines Changed: ' + value,\n                                                'Percentage: ' + percentage + '%'\n                                            ];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                function createHourlyCommitChart(data) {\n                    const ctx = document.getElementById('hourlyCommitChart');\n                    const existingChart = Chart.getChart(ctx);\n                    if (existingChart) {\n                        existingChart.destroy();\n                    }\n                    \n                    new Chart(ctx, {\n                        type: 'line',\n                        data: data,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            interaction: {\n                                intersect: false,\n                                mode: 'index'\n                            },\n                            plugins: {\n                                legend: {\n                                    position: 'top',\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            return context.dataset.label + ': ' + context.raw + ' commits';\n                                        }\n                                    }\n                                }\n                            },\n                            scales: {\n                                x: {\n                                    title: {\n                                        display: true,\n                                        text: 'Hour'\n                                    }\n                                },\n                                y: {\n                                    beginAtZero: true,\n                                    title: {\n                                        display: true,\n                                        text: 'Number of Commits'\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                function createHourlyChangeChart(data) {\n                    const ctx = document.getElementById('hourlyChangeChart');\n                    const existingChart = Chart.getChart(ctx);\n                    if (existingChart) {\n                        existingChart.destroy();\n                    }\n                    \n                    new Chart(ctx, {\n                        type: 'bar',\n                        data: data,\n                        options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            interaction: {\n                                intersect: false,\n                                mode: 'index'\n                            },\n                            plugins: {\n                                legend: {\n                                    position: 'top',\n                                },\n                                tooltip: {\n                                    callbacks: {\n                                        label: function(context) {\n                                            return context.dataset.label + ': ' + context.raw + ' lines changed';\n                                        }\n                                    }\n                                }\n                            },\n                            scales: {\n                                x: {\n                                    title: {\n                                        display: true,\n                                        text: 'Hour'\n                                    }\n                                },\n                                y: {\n                                    beginAtZero: true,\n                                    title: {\n                                        display: true,\n                                        text: 'Lines Changed'\n                                    },\n                                    stacked: true  // 启用堆叠效果\n                                }\n                            }\n                        }\n                    });\n                }\n\n                // 初始化所有图表\n                createCommitChart(commitData);\n                createChangeChart(changeData);\n                createPieChart(commitData);\n                createLinesChangedPieChart(changeData);\n                createHourlyCommitChart(hourlyCommitData);  // 创建每小时提交次数图表\n                createHourlyChangeChart(hourlyChangeData);  // 创建每小时代码变更行数图表\n\n                // 更新图表数据的消息处理\n                window.addEventListener('message', event => {\n                    const message = event.data;\n                    switch (message.command) {\n                        case 'updateDevelopers':\n                            // 更新开发者下拉列表\n                            const developerSelect = document.getElementById('developerSelect');\n                            if (developerSelect && message.developers) {\n                                const currentValue = developerSelect.value;\n                                developerSelect.innerHTML = \n                                    '<option value="all">All developers</option>' + \n                                    message.developers.map(author => \n                                        '<option value="' + author + '">' + author + '</option>'\n                                    ).join('');\n                                // 保持当前选中的开发者\n                                if (currentValue && message.developers.includes(currentValue)) {\n                                    developerSelect.value = currentValue;\n                                } else {\n                                    developerSelect.value = 'all';\n                                }\n                            }\n                            break;\n                        case 'updateData':\n                            // 更新所有图表\n                            if (commitChart) {\n                                commitChart.data = message.commitData;\n                                commitChart.update();\n                                createPieChart(message.commitData);\n                            }\n                            if (changeChart) {\n                                changeChart.data = message.changeData;\n                                changeChart.update();\n                                createLinesChangedPieChart(message.changeData);\n                            }\n                            \n                            if (message.hourlyCommitData) {\n                                createHourlyCommitChart(message.hourlyCommitData);\n                            }\n                            if (message.hourlyChangeData) {\n                                createHourlyChangeChart(message.hourlyChangeData);\n                            }\n\n                            if (message.calendarData) {\n                                renderCalendar(message.calendarData);\n                            }\n\n                            // 更新summary表格\n                            const summaryTable = document.querySelector('.summary-table');\n                            if (summaryTable && message.authorStats) {\n                                // 保留表头\n                                const tableHeader = summaryTable.querySelector('tr');\n                                if (tableHeader) {\n                                    summaryTable.innerHTML = '';\n                                    summaryTable.appendChild(tableHeader);\n\n                                    // 使用后端发送的准确统计数据\n                                    message.authorStats.forEach(authorStat => {\n                                        const row = document.createElement('tr');\n                                        const cells = [\n                                            authorStat.author,\n                                            authorStat.totalCommits || 0,\n                                            authorStat.totalInsertions || 0,\n                                            authorStat.totalDeletions || 0,\n                                            authorStat.totalFiles || 0\n                                        ];\n                                        cells.forEach(value => {\n                                            const cell = document.createElement('td');\n                                            cell.textContent = value.toString();\n                                            row.appendChild(cell);\n                                        });\n                                        summaryTable.appendChild(row);\n                                    });\n                                }\n                            }\n                            break;\n                    }\n                });\n\n                // 时间范围选择处理\n                const timeRangeSelect = document.getElementById('timeRange');\n                const startDateInput = document.getElementById('startDate');\n                const endDateInput = document.getElementById('endDate');\n\n                // 时间范围选择变化处理\n                timeRangeSelect.addEventListener('change', function(e) {\n                    const value = this.value;\n                    if (value === 'custom') {\n                        return; // 保持当前选择的日期不变\n                    }\n\n                    const days = parseInt(value);\n                    const end = new Date();\n                    const start = new Date();\n                    start.setDate(end.getDate() - (days - 1)); // -1是因为包含今天\n\n                    startDateInput.value = start.toISOString().split('T')[0];\n                    endDateInput.value = end.toISOString().split('T')[0];\n\n                    // 通知扩展时间范围已更改\n                    vscode.postMessage({\n                        command: 'timeRangeChanged',\n                        days: days,\n                        startDate: startDateInput.value,\n                        endDate: endDateInput.value\n                    });\n                });\n\n                // 日期选择变化处理\n                function handleDateChange() {\n                    const start = new Date(startDateInput.value);\n                    const end = new Date(endDateInput.value);\n                    \n                    if (start && end && start <= end) {\n                        // 计算天数差异\n                        const diffTime = Math.abs(end - start);\n                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1; // +1 包含开始日期\n                        \n                        // 设置下拉框为custom\n                        timeRangeSelect.value = 'custom';\n                        \n                        // 通知扩展时间范围已更改\n                        vscode.postMessage({\n                            command: 'timeRangeChanged',\n                            days: diffDays,\n                            startDate: startDateInput.value,\n                            endDate: endDateInput.value\n                        });\n                    }\n                }\n\n                startDateInput.addEventListener('change', handleDateChange);\n                endDateInput.addEventListener('change', handleDateChange);\n\n                // 预定义星期标题HTML (字符串格式)\n                const WEEKDAYS_HEADER_HTML = '<div style="display: grid; grid-template-columns: repeat(7, 1fr); margin-bottom: 8px; font-weight: 500;">' +\n                    ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n                        .map(day => '<div style="text-align: center">' + day + '</div>')\n                        .join('') +\n                    '</div>';\n\n                // 渲染日历\n                function renderCalendar(calendarData) {\n                    const container = document.getElementById('calendar');\n                    if (!container) return;\n\n                    // 清空容器\n                    container.innerHTML = "";\n\n                    // 创建横向日历容器\n                    const calendarWrapper = document.createElement('div');\n                    calendarWrapper.style.display = 'grid';\n                    calendarWrapper.style.gridTemplateColumns = 'repeat(8, 1fr)';\n                    calendarWrapper.style.gap = '8px';\n                    calendarWrapper.style.padding = '8px';\n\n                    // 按月份分组数据\n                    const months = {};\n                    calendarData.forEach(day => {\n                        const date = new Date(day.date);\n                        const month = date.toLocaleString('default', { month: 'long', year: 'numeric' });\n                        if (!months[month]) {\n                            months[month] = [];\n                        }\n                        months[month].push(day);\n                    });\n\n                    // 渲染每个月\n                    Object.entries(months).forEach(([month, days]) => {\n                        // 创建月份容器\n                        const monthContainer = document.createElement('div');\n                        monthContainer.style.display = 'flex';\n                        monthContainer.style.flexDirection = 'column';\n                        monthContainer.style.gap = '4px';\n\n                        // 添加月份标题\n                        const monthHeader = document.createElement('div');\n                        monthHeader.textContent = month;\n                        monthHeader.style.fontWeight = '500';\n                        monthHeader.style.marginBottom = '8px';\n                        monthContainer.appendChild(monthHeader);\n\n                        // 使用预定义的星期标题\n                        const weekRow = document.createElement('div');\n                        weekRow.innerHTML = WEEKDAYS_HEADER_HTML;\n                        monthContainer.appendChild(weekRow);\n\n                        // 创建日期网格\n                        const gridContainer = document.createElement('div');\n                        gridContainer.style.display = 'grid';\n                        gridContainer.style.gridTemplateColumns = 'repeat(7, 1fr)';\n                        gridContainer.style.gap = '2px';\n\n                        // 填充空白格\n                        const firstDay = new Date(days[0].date);\n                        const startDay = firstDay.getDay();\n                        for (let i = 0; i < startDay; i++) {\n                            const empty = document.createElement('div');\n                            gridContainer.appendChild(empty);\n                        }\n\n                        // 添加日期格\n                        days.forEach(day => {\n                            const cell = document.createElement('div');\n                                cell.style.backgroundColor = day.totalCommits > 0 \n                                ? \`rgba(46, 204, 113, \${day.colorIntensity})\`\n                                : 'transparent';\n                            cell.style.width = '24px';\n                            cell.style.height = '24px';\n                            cell.style.borderRadius = '4px';\n                            cell.style.display = 'flex';\n                            cell.style.alignItems = 'center';\n                            cell.style.justifyContent = 'center';\n                            cell.style.fontSize = '12px';\n                            cell.title = \`Date: \${day.date}, Commits: \${day.totalCommits}\`;\n                            \n                            const dateNum = new Date(day.date).getDate();\n                            cell.textContent = dateNum;\n                            \n                            gridContainer.appendChild(cell);\n                        });\n\n                        monthContainer.appendChild(gridContainer);\n                        calendarWrapper.appendChild(monthContainer);\n                    });\n\n                    container.appendChild(calendarWrapper);\n                }\n\n                // 初始化日历\n                const calendarData = ${JSON.stringify(p)};\n                renderCalendar(calendarData);\n\n                // 新增开发者选择变化处理\n                const developerSelect = document.getElementById('developerSelect');\n                developerSelect.addEventListener('change', function(e) {\n                    const developer = this.value;\n                    vscode.postMessage({\n                        command: 'developerChanged',\n                        developer: developer\n                    });\n                });\n\n            <\/script>\n        </body>\n        </html>`}getAllDates(t){var e,n;const a=(0,u.default)(null===(e=Object.values(t)[0])||void 0===e?void 0:e.startDate).startOf("day"),o=(0,u.default)(null===(n=Object.values(t)[0])||void 0===n?void 0:n.endDate).endOf("day"),i=[];let r=a.clone();for(;r.isSameOrBefore(o,"day");)i.push(r.format("YYYY-MM-DD")),r.add(1,"day");return i}getHoursArray(){return Array.from({length:24},((t,e)=>e.toString().padStart(2,"0")))}prepareCommitData(t,e){const n=(t=t.filter((t=>!t.author.toLowerCase().includes("stash")))).map(((t,n)=>({label:t.author,data:e.map((e=>{var n;return(null===(n=t.dailyStats[e])||void 0===n?void 0:n.commits)||0})),borderColor:this.getColor(n),backgroundColor:this.getColor(n),fill:!1,tension:.4,cubicInterpolationMode:"monotone"})));return{labels:e,datasets:n}}prepareChangeData(t,e){const n=(t=t.filter((t=>!t.author.toLowerCase().includes("stash")))).map(((t,n)=>({label:t.author,data:e.map((e=>{const n=t.dailyStats[e];return n?n.insertions+n.deletions:0})),backgroundColor:this.getColor(n),stack:"combined"})));return{labels:e,datasets:n}}prepareHourlyCommitData(t,e){return{labels:e.map((t=>`${t}:00`)),datasets:t.filter((t=>!t.author.toLowerCase().includes("stash"))).map(((t,n)=>({label:t.author,data:e.map((e=>{var n;return(null===(n=t.hourlyStats[e])||void 0===n?void 0:n.commits)||0})),borderColor:this.getColor(n),backgroundColor:this.getColor(n),fill:!1,tension:.4})))}}prepareHourlyChangeData(t,e){return{labels:e.map((t=>`${t}:00`)),datasets:t.filter((t=>!t.author.toLowerCase().includes("stash"))).map(((t,n)=>({label:t.author,data:e.map((e=>{const n=t.hourlyStats[e];return((null==n?void 0:n.insertions)||0)+((null==n?void 0:n.deletions)||0)})),backgroundColor:this.getColor(n),stack:"combined"})))}}prepareCalendarData(t,e){const n=e.reduce(((e,n)=>{const a=t.reduce(((t,e)=>{var a;return t+((null===(a=e.dailyStats[n])||void 0===a?void 0:a.commits)||0)}),0);return Math.max(e,a)}),1);return e.map((e=>{const a=t.reduce(((t,n)=>{var a;return t+((null===(a=n.dailyStats[e])||void 0===a?void 0:a.commits)||0)}),0),o=Math.log1p(a)/Math.log1p(n);return{date:e,totalCommits:a,colorIntensity:o}}))}getColor(t){const e=["#2196F3","#4CAF50","#F44336","#FFC107","#9C27B0","#00BCD4","#FF9800","#795548","#607D8B","#E91E63"];return e[t%e.length]}}},383:t=>{t.exports=require("fs")},716:t=>{t.exports=require("moment")},3:t=>{t.exports=require("path")},807:t=>{t.exports=require("simple-git")},398:t=>{t.exports=require("vscode")}},e={};var n=function n(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}(144);module.exports=n})();